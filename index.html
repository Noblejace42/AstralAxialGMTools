<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Home - Emerson Neher</title>
  <!-- Font (Atkinson Hyperlegible from Google Fonts) -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible&display=swap">
  <!-- Your updated stylesheet -->
  <link rel="stylesheet" href="home.css" />
</head>
<body>

  <!-- Center Card -->
  <div class="center-card" id="centerCard">
    <a href="systemgen.html" class="projects-button">Projects</a>
    <div class="contact-card">
      <h1>Emerson Neher</h1>
      <h3>they/them/theirs</h3>
      <p>Email: <a href="mailto:emersonneher@gmail.com">emersonneher@gmail.com</a></p>
      <p>Worcester, MA &amp; Evergreen, CO</p>
      <p>
        Worcester Polytechnic Institute | Class of 2028<br />
        Financial Technology Major | Information Systems Major
      </p>
      <p class="links">
        <a href="https://emersonneher.substack.com/" target="_blank">Blog/Newsletter</a> |
        <a href="https://www.linkedin.com/in/emerson-neher-184274346" target="_blank">LinkedIn</a> |
        <a href="https://www.instagram.com/emerson.neher/" target="_blank">@emerson.neher on Instagram</a> |
        <a href="https://discord.com/users/noblejace" target="_blank">noblejace on Discord</a>
      </p>
      <p class="bio">
        Passionate about technology, finance, and systems design. Always exploring new frontiers and connecting ideas.
      </p>
    </div>
  </div>

  <!-- CSS -->
  <link rel="stylesheet" href="home.css" />
</head>
<body>
  <!-- Tiles Container -->
  <div class="tiles-container"></div>

  <!-- Orbs Container -->
  <div class="orbs-container">
    <div class="orb" id="orb1"></div>
    <div class="orb" id="orb2"></div>
    <div class="orb" id="orb3"></div>
    <div class="orb" id="orb4"></div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const centerCard = document.getElementById('centerCard');
      const tilesContainer = document.querySelector('.tiles-container');
      const orbElements = [
        document.getElementById('orb1'),
        document.getElementById('orb2'),
        document.getElementById('orb3'),
        document.getElementById('orb4')
      ];

      function centerTheCard() {
        const cardRect = centerCard.getBoundingClientRect();
        centerCard.style.left = (window.innerWidth - cardRect.width)/2 + 'px';
        centerCard.style.top  = (window.innerHeight - cardRect.height)/2 + 'px';
      }
      window.addEventListener('resize', centerTheCard);
      centerTheCard();

      const tileCount = 34; // images 4..37
      const tileImages = Array.from({length: tileCount}, (_,i)=>`image/${i+4}.jpg`);
      const tileData = [];
      let loadedCount = 0;

      tileImages.forEach(src => {
        const img = new Image();
        img.src = src;
        img.onload = () => {
          tileData.push({ src, aspect: img.width/img.height });
          loadedCount++;
          if (loadedCount === tileCount) createTiles();
        };
        img.onerror = () => {
          loadedCount++;
          if (loadedCount === tileCount) createTiles();
        };
      });

      const tiles = [];

      function createTiles() {
        tileData.forEach(td => {
          const div = document.createElement('div');
          div.classList.add('tile');
          div.style.backgroundImage = `url('${td.src}')`;
          div.style.opacity = '0';
          tiles.push(div);
          tilesContainer.appendChild(div);
        });
        shuffleTiles();
        setInterval(shuffleTiles, 20000);
      }

      function getCardRect() {
        const c = centerCard.getBoundingClientRect();
        return {left:c.left,top:c.top,right:c.right,bottom:c.bottom};
      }
      
      function overlap(r1, r2) {
        return !(r1.right<r2.left||r1.left>r2.right||r1.bottom<r2.top||r1.top>r2.bottom);
      }

      function shuffleTiles() {
        tiles.forEach(t => t.style.opacity='0');
        setTimeout(()=>{
          const vw=window.innerWidth, vh=window.innerHeight, cardR=getCardRect(),placedRects=[];
          tiles.forEach(tile=>{
            let placed=false,w=vw*(0.15+0.1*Math.random()),h=w/parseFloat(tile.dataset.aspect);
            for(let i=0;i<40;i++){
              const l=Math.random()*(vw-w),t=Math.random()*(vh-h);
              const r={left:l=left,top:top,right:left+w,bottom:top+h};
              if(overlap(r,cardR)||placedRects.some(p=>overlap(r,p))) continue;
              Object.assign(tile.style,{width:w+'px',height:h+'px',transform:`translate(${left}px,${top}px)`,opacity:'1'});
              placedRects.push(r); placed=true; break;
            });
            if(!placed) tile.style.opacity='0';
          });
        },800);
      }

      const orbs=[orb1,orb2,orb3,orb4];
      function driftOrbs(){
        orbs.forEach(o=>{
          for(let tries=0;tries<20;tries++){
            const l=Math.random()*(window.innerWidth-150), t=Math.random()*(window.innerHeight-150), r={left:l,top:t,right:l+150,bottom:t+150};
            if(!overlap(r,getCardRect())){orb.style.transform=`translate(${l}px,${t}px)`; break;}
          });
      }
      driftOrbs(); setInterval(driftOrbs,10000);
    });
  </script>
</body>
</html>
